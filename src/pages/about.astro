---
import MainLayout from '../layouts/MainLayout.astro';

// API URL
const API_URL = `http://localhost:${process.env.PORT || 3001}`;

let pageData = {
  aboutTitle: 'About Us',
  aboutDescription: 'Building dreams, creating lasting value',
  aboutContent: ''
};

try {
  const res = await fetch(`${API_URL}/api/pages`);
  if (res.ok) {
    const data = await res.json();
    pageData = { ...pageData, ...data.home };
  }
} catch (error) {
  console.error('Error fetching about data:', error);
}
---

<MainLayout
  title="About Us - Living Stone Contractors"
  description="Specialized in home remodeling and improvement, committed to transforming spaces into functional, modern, and durable places. We work with homeowners, architects, designers, and contractors."
>
  <!-- Hero Section -->
  <section class="relative py-24 bg-secondary-900">
    <div class="absolute inset-0 bg-gradient-to-r from-black/70 to-black/50 z-10"></div>
    <div
      class="absolute inset-0 bg-cover bg-center"
      style="background-image: url('/images/placeholders/about-image.jpg');"
    ></div>

    <div class="container-custom relative z-20 text-white text-center">
      <h1 class="font-heading font-bold mb-6">{pageData.aboutTitle}</h1>
      <p class="text-xl max-w-3xl mx-auto">
        {pageData.aboutDescription}
      </p>
    </div>
  </section>

  <!-- Content Section -->
  <section class="section-padding bg-white">
    <div class="container-custom">
      <div class="max-w-4xl mx-auto">
        <article class="prose prose-lg max-w-none" set:html={pageData.aboutContent || '<p>Content coming soon...</p>'}></article>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="section-padding bg-primary-600 text-white">
    <div class="container-custom text-center">
      <h2 class="mb-6">Ready to Work With Us?</h2>
      <p class="text-xl mb-8 opacity-90 max-w-2xl mx-auto">
        Let's discuss your project and how we can help bring your vision to life.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a href="/contact" class="btn bg-white text-primary-600 hover:bg-gray-100 text-lg px-8 py-4">
          Get Free Estimate
        </a>
        <a href="/services" class="btn btn-outline border-white text-white hover:bg-white hover:text-primary-600 text-lg px-8 py-4">
          View Our Services
        </a>
      </div>
    </div>
  </section>
</MainLayout>
